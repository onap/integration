*** Settings ***
Library       OperatingSystem
Library       RequestsLibrary
Library       requests
Library       Collections

*** Variables ***
${GENERICVNFKEYVALUE}  generic-vnf-integration-test1
${PSERVERKEYVALUE}     pserver-integration-test1
${GENERICVNFURL}       https://${HOST_IP}:8443/aai/v11/network/generic-vnfs/generic-vnf/${GENERICVNFKEYVALUE}
${PSERVERURL}          https://${HOST_IP}:8443/aai/v11/cloud-infrastructure/pservers/pserver/${PSERVERKEYVALUE}
${RELATIONSHIPURL}     https://${HOST_IP}:8443/aai/v11/network/generic-vnfs/generic-vnf/${GENERICVNFKEYVALUE}/relationship-list/relationship
${CUSTOMQUERYURL}      https://${HOST_IP}:8443/aai/v11/query?format=simple
${GENERICVNFDATA}  {"vnf-id":"${GENERICVNFKEYVALUE}","vnf-name":"example-vnf-name-val-61436","vnf-name2":"example-vnf-name2-val-23814","vnf-type":"example-vnf-type-val-33932","service-id":"example-service-id-val-97822","regional-resource-zone":"example-regional-resource-zone-val-60719","prov-status":"example-prov-status-val-54156","operational-status":"example-operational-status-val-67223","license-key":"example-license-key-val-5660","equipment-role":"example-equipment-role-val-54143","orchestration-status":"example-orchestration-status-val-12498","heat-stack-id":"example-heat-stack-id-val-63680","mso-catalog-key":"example-mso-catalog-key-val-81105","management-option":"example-management-option-val-42861","ipv4-oam-address":"example-ipv4-oam-address-val-98832","ipv4-loopback0-address":"example-ipv4-loopback0-address-val-88563","nm-lan-v6-address":"example-nm-lan-v6-address-val-11183","management-v6-address":"example-management-v6-address-val-80180","vcpu":70721222,"vcpu-units":"example-vcpu-units-val-62380","vmemory":77801423,"vmemory-units":"example-vmemory-units-val-93451","vdisk":73021730,"vdisk-units":"example-vdisk-units-val-20294","in-maint":true,"is-closed-loop-disabled":true,"summary-status":"example-summary-status-val-17765","encrypted-access-flag":true,"entitlement-assignment-group-uuid":"example-entitlement-assignment-group-uuid-val-6793","entitlement-resource-uuid":"example-entitlement-resource-uuid-val-92651","license-assignment-group-uuid":"example-license-assignment-group-uuid-val-76841","license-key-uuid":"example-license-key-uuid-val-80613","model-invariant-id":"example-model-invariant-id-val-45219","model-version-id":"example-model-version-id-val-64051","model-customization-id":"example-model-customization-id-val-32200","widget-model-id":"example-widget-model-id-val-22382","widget-model-version":"example-widget-model-version-val-31493","as-number":"example-as-number-val-94331","regional-resource-subzone":"example-regional-resource-subzone-val-26401","nf-type":"example-nf-type-val-13598","nf-function":"example-nf-function-val-37569","nf-role":"example-nf-role-val-76185","nf-naming-code":"example-nf-naming-code-val-29166","selflink":"example-selflink-val-74322","ipv4-oam-gateway-address":"example-ipv4-oam-gateway-address-val-12375","ipv4-oam-gateway-address-prefix-length":58480,"vlan-id-outer":96814277,"nm-profile-name":"example-nm-profile-name-val-67922","l-interfaces":{"l-interface":[{"interface-name":"example-interface-name-val-24142","interface-role":"example-interface-role-val-54521","v6-wan-link-ip":"example-v6-wan-link-ip-val-47030","selflink":"example-selflink-val-48331","interface-id":"example-interface-id-val-50297","macaddr":"example-macaddr-val-81570","network-name":"example-network-name-val-56837","management-option":"example-management-option-val-9769","interface-description":"example-interface-description-val-90087","is-port-mirrored":true,"in-maint":true,"prov-status":"example-prov-status-val-55940","is-ip-unnumbered":true,"allowed-address-pairs":"example-allowed-address-pairs-val-32578","vlans":{"vlan":[{"vlan-interface":"example-vlan-interface-val-91106","vlan-id-inner":31072073,"vlan-id-outer":57022464,"speed-value":"example-speed-value-val-69029","speed-units":"example-speed-units-val-73768","vlan-description":"example-vlan-description-val-31479","backdoor-connection":"example-backdoor-connection-val-52969","vpn-key":"example-vpn-key-val-43220","orchestration-status":"example-orchestration-status-val-60552","in-maint":true,"prov-status":"example-prov-status-val-25556","is-ip-unnumbered":true,"l3-interface-ipv4-address-list":[{"l3-interface-ipv4-address":"example-l3-interface-ipv4-address-val-45227","l3-interface-ipv4-prefix-length":38532791,"vlan-id-inner":32179232,"vlan-id-outer":59970131,"is-floating":true,"neutron-network-id":"example-neutron-network-id-val-35278","neutron-subnet-id":"example-neutron-subnet-id-val-67394"}],"l3-interface-ipv6-address-list":[{"l3-interface-ipv6-address":"example-l3-interface-ipv6-address-val-64489","l3-interface-ipv6-prefix-length":79193055,"vlan-id-inner":33181771,"vlan-id-outer":6430151,"is-floating":true,"neutron-network-id":"example-neutron-network-id-val-63257","neutron-subnet-id":"example-neutron-subnet-id-val-20072"}]}]},"sriov-vfs":{"sriov-vf":[{"pci-id":"example-pci-id-val-61354","vf-vlan-filter":"example-vf-vlan-filter-val-17277","vf-mac-filter":"example-vf-mac-filter-val-66168","vf-vlan-strip":true,"vf-vlan-anti-spoof-check":true,"vf-mac-anti-spoof-check":true,"vf-mirrors":"example-vf-mirrors-val-87016","vf-broadcast-allow":true,"vf-unknown-multicast-allow":true,"vf-unknown-unicast-allow":true,"vf-insert-stag":true,"vf-link-status":"example-vf-link-status-val-8415","neutron-network-id":"example-neutron-network-id-val-92662"}]},"l-interfaces":{"l-interface":[{"interface-name":"example-interface-name-val-56330","interface-role":"example-interface-role-val-95369","v6-wan-link-ip":"example-v6-wan-link-ip-val-64596","selflink":"example-selflink-val-9580","interface-id":"example-interface-id-val-60605","macaddr":"example-macaddr-val-51327","network-name":"example-network-name-val-56119","management-option":"example-management-option-val-49359","interface-description":"example-interface-description-val-31419","is-port-mirrored":true,"in-maint":true,"prov-status":"example-prov-status-val-50095","is-ip-unnumbered":true,"allowed-address-pairs":"example-allowed-address-pairs-val-51058"}]},"l3-interface-ipv4-address-list":[{"l3-interface-ipv4-address":"example-l3-interface-ipv4-address-val-18455","l3-interface-ipv4-prefix-length":59523901,"vlan-id-inner":33091767,"vlan-id-outer":61667994,"is-floating":true,"neutron-network-id":"example-neutron-network-id-val-98128","neutron-subnet-id":"example-neutron-subnet-id-val-54097"}],"l3-interface-ipv6-address-list":[{"l3-interface-ipv6-address":"example-l3-interface-ipv6-address-val-69383","l3-interface-ipv6-prefix-length":47953281,"vlan-id-inner":60790101,"vlan-id-outer":31318322,"is-floating":true,"neutron-network-id":"example-neutron-network-id-val-18476","neutron-subnet-id":"example-neutron-subnet-id-val-74900"}]}]},"lag-interfaces":{"lag-interface":[{"interface-name":"example-interface-name-val-95694","interface-description":"example-interface-description-val-71758","speed-value":"example-speed-value-val-68639","speed-units":"example-speed-units-val-2555","interface-id":"example-interface-id-val-62192","interface-role":"example-interface-role-val-55485","prov-status":"example-prov-status-val-71308","in-maint":true,"l-interfaces":{"l-interface":[{"interface-name":"example-interface-name-val-25386","interface-role":"example-interface-role-val-17973","v6-wan-link-ip":"example-v6-wan-link-ip-val-1678","selflink":"example-selflink-val-66333","interface-id":"example-interface-id-val-60080","macaddr":"example-macaddr-val-53380","network-name":"example-network-name-val-78610","management-option":"example-management-option-val-32917","interface-description":"example-interface-description-val-28983","is-port-mirrored":true,"in-maint":true,"prov-status":"example-prov-status-val-98061","is-ip-unnumbered":true,"allowed-address-pairs":"example-allowed-address-pairs-val-43417","vlans":{"vlan":[{"vlan-interface":"example-vlan-interface-val-61083","vlan-id-inner":11805238,"vlan-id-outer":75110856,"speed-value":"example-speed-value-val-48072","speed-units":"example-speed-units-val-66304","vlan-description":"example-vlan-description-val-33094","backdoor-connection":"example-backdoor-connection-val-86491","vpn-key":"example-vpn-key-val-26904","orchestration-status":"example-orchestration-status-val-66983","in-maint":true,"prov-status":"example-prov-status-val-90793","is-ip-unnumbered":true,"l3-interface-ipv4-address-list":[{"l3-interface-ipv4-address":"example-l3-interface-ipv4-address-val-15046","l3-interface-ipv4-prefix-length":9589247,"vlan-id-inner":25435271,"vlan-id-outer":82853,"is-floating":true,"neutron-network-id":"example-neutron-network-id-val-9018","neutron-subnet-id":"example-neutron-subnet-id-val-48432"}],"l3-interface-ipv6-address-list":[{"l3-interface-ipv6-address":"example-l3-interface-ipv6-address-val-13332","l3-interface-ipv6-prefix-length":45233978,"vlan-id-inner":56206097,"vlan-id-outer":45370130,"is-floating":true,"neutron-network-id":"example-neutron-network-id-val-98413","neutron-subnet-id":"example-neutron-subnet-id-val-86133"}]}]},"sriov-vfs":{"sriov-vf":[{"pci-id":"example-pci-id-val-55065","vf-vlan-filter":"example-vf-vlan-filter-val-93391","vf-mac-filter":"example-vf-mac-filter-val-78723","vf-vlan-strip":true,"vf-vlan-anti-spoof-check":true,"vf-mac-anti-spoof-check":true,"vf-mirrors":"example-vf-mirrors-val-46104","vf-broadcast-allow":true,"vf-unknown-multicast-allow":true,"vf-unknown-unicast-allow":true,"vf-insert-stag":true,"vf-link-status":"example-vf-link-status-val-35749","neutron-network-id":"example-neutron-network-id-val-92254"}]},"l-interfaces":{"l-interface":[{"interface-name":"example-interface-name-val-82376","interface-role":"example-interface-role-val-40601","v6-wan-link-ip":"example-v6-wan-link-ip-val-14795","selflink":"example-selflink-val-88570","interface-id":"example-interface-id-val-34845","macaddr":"example-macaddr-val-96614","network-name":"example-network-name-val-86129","management-option":"example-management-option-val-3407","interface-description":"example-interface-description-val-46405","is-port-mirrored":true,"in-maint":true,"prov-status":"example-prov-status-val-99188","is-ip-unnumbered":true,"allowed-address-pairs":"example-allowed-address-pairs-val-63456"}]},"l3-interface-ipv4-address-list":[{"l3-interface-ipv4-address":"example-l3-interface-ipv4-address-val-75954","l3-interface-ipv4-prefix-length":32619444,"vlan-id-inner":68127190,"vlan-id-outer":54265824,"is-floating":true,"neutron-network-id":"example-neutron-network-id-val-39559","neutron-subnet-id":"example-neutron-subnet-id-val-92921"}],"l3-interface-ipv6-address-list":[{"l3-interface-ipv6-address":"example-l3-interface-ipv6-address-val-42211","l3-interface-ipv6-prefix-length":17451569,"vlan-id-inner":90423082,"vlan-id-outer":32347423,"is-floating":true,"neutron-network-id":"example-neutron-network-id-val-74768","neutron-subnet-id":"example-neutron-subnet-id-val-31566"}]}]}}]},"vf-modules":{"vf-module":[{"vf-module-id":"example-vf-module-id-val-12375","vf-module-name":"example-vf-module-name-val-74404","heat-stack-id":"example-heat-stack-id-val-41245","orchestration-status":"example-orchestration-status-val-62563","is-base-vf-module":true,"model-invariant-id":"example-model-invariant-id-val-37339","model-version-id":"example-model-version-id-val-51096","model-customization-id":"example-model-customization-id-val-1460","widget-model-id":"example-widget-model-id-val-35997","widget-model-version":"example-widget-model-version-val-62080","contrail-service-instance-fqdn":"example-contrail-service-instance-fqdn-val-34219","module-index":1723,"selflink":"example-selflink-val-64915"}]},"licenses":{"license":[{"group-uuid":"example-group-uuid-val-50348","resource-uuid":"example-resource-uuid-val-46521"}]},"entitlements":{"entitlement":[{"group-uuid":"example-group-uuid-val-86195","resource-uuid":"example-resource-uuid-val-49062"}]}}
${PSERVERDATA}  {"hostname":"${PSERVERKEYVALUE}","ptnii-equip-name":"example-ptnii-equip-name-val-34642","number-of-cpus":84692,"disk-in-gigabytes":21548,"ram-in-megabytes":2010,"equip-type":"example-equip-type-val-46868","equip-vendor":"example-equip-vendor-val-58378","equip-model":"example-equip-model-val-49667","fqdn":"example-fqdn-val-58266","pserver-selflink":"example-pserver-selflink-val-80113","ipv4-oam-address":"example-ipv4-oam-address-val-71608","serial-number":"example-serial-number-val-34523","ipaddress-v4-loopback-0":"example-ipaddress-v4-loopback0-val-4173","ipaddress-v6-loopback-0":"example-ipaddress-v6-loopback0-val-62206","ipaddress-v4-aim":"example-ipaddress-v4-aim-val-41298","ipaddress-v6-aim":"example-ipaddress-v6-aim-val-96514","ipaddress-v6-oam":"example-ipaddress-v6-oam-val-78247","inv-status":"example-inv-status-val-93966","pserver-id":"example-pserver-id-val-47577","internet-topology":"example-internet-topology-val-65227","in-maint":true,"pserver-name2":"example-pserver-name2-val-94504","purpose":"example-purpose-val-25201","prov-status":"example-prov-status-val-79019","management-option":"example-management-option-val-86438","host-profile":"example-host-profile-val-93838","p-interfaces":{"p-interface":[{"interface-name":"example-interface-name-val-55444","speed-value":"example-speed-value-val-30765","speed-units":"example-speed-units-val-48515","port-description":"example-port-description-val-96959","equipment-identifier":"example-equipment-identifier-val-19416","interface-role":"example-interface-role-val-63688","interface-type":"example-interface-type-val-54743","prov-status":"example-prov-status-val-52065","in-maint":true,"inv-status":"example-inv-status-val-42783","sriov-pfs":{"sriov-pf":[{"pf-pci-id":"example-pf-pci-id-val-74864"}]},"l-interfaces":{"l-interface":[{"interface-name":"example-interface-name-val-22388","interface-role":"example-interface-role-val-58147","v6-wan-link-ip":"example-v6-wan-link-ip-val-95446","selflink":"example-selflink-val-98510","interface-id":"example-interface-id-val-4590","macaddr":"example-macaddr-val-30191","network-name":"example-network-name-val-78823","management-option":"example-management-option-val-23012","interface-description":"example-interface-description-val-55442","is-port-mirrored":true,"in-maint":true,"prov-status":"example-prov-status-val-94418","is-ip-unnumbered":true,"allowed-address-pairs":"example-allowed-address-pairs-val-28004","vlans":{"vlan":[{"vlan-interface":"example-vlan-interface-val-25336","vlan-id-inner":26236564,"vlan-id-outer":46928574,"speed-value":"example-speed-value-val-27478","speed-units":"example-speed-units-val-70336","vlan-description":"example-vlan-description-val-92660","backdoor-connection":"example-backdoor-connection-val-66277","vpn-key":"example-vpn-key-val-4325","orchestration-status":"example-orchestration-status-val-49334","in-maint":true,"prov-status":"example-prov-status-val-30145","is-ip-unnumbered":true,"l3-interface-ipv4-address-list":[{"l3-interface-ipv4-address":"example-l3-interface-ipv4-address-val-7810","l3-interface-ipv4-prefix-length":21802495,"vlan-id-inner":93457355,"vlan-id-outer":69279959,"is-floating":true,"neutron-network-id":"example-neutron-network-id-val-43588","neutron-subnet-id":"example-neutron-subnet-id-val-30646"}],"l3-interface-ipv6-address-list":[{"l3-interface-ipv6-address":"example-l3-interface-ipv6-address-val-33011","l3-interface-ipv6-prefix-length":42660850,"vlan-id-inner":98698343,"vlan-id-outer":61912209,"is-floating":true,"neutron-network-id":"example-neutron-network-id-val-33882","neutron-subnet-id":"example-neutron-subnet-id-val-12327"}]}]},"sriov-vfs":{"sriov-vf":[{"pci-id":"example-pci-id-val-29862","vf-vlan-filter":"example-vf-vlan-filter-val-46369","vf-mac-filter":"example-vf-mac-filter-val-68489","vf-vlan-strip":true,"vf-vlan-anti-spoof-check":true,"vf-mac-anti-spoof-check":true,"vf-mirrors":"example-vf-mirrors-val-70037","vf-broadcast-allow":true,"vf-unknown-multicast-allow":true,"vf-unknown-unicast-allow":true,"vf-insert-stag":true,"vf-link-status":"example-vf-link-status-val-81133","neutron-network-id":"example-neutron-network-id-val-99772"}]},"l-interfaces":{"l-interface":[{"interface-name":"example-interface-name-val-91143","interface-role":"example-interface-role-val-26018","v6-wan-link-ip":"example-v6-wan-link-ip-val-84852","selflink":"example-selflink-val-67850","interface-id":"example-interface-id-val-42475","macaddr":"example-macaddr-val-97398","network-name":"example-network-name-val-65143","management-option":"example-management-option-val-68439","interface-description":"example-interface-description-val-66196","is-port-mirrored":true,"in-maint":true,"prov-status":"example-prov-status-val-48504","is-ip-unnumbered":true,"allowed-address-pairs":"example-allowed-address-pairs-val-43520"}]},"l3-interface-ipv4-address-list":[{"l3-interface-ipv4-address":"example-l3-interface-ipv4-address-val-39495","l3-interface-ipv4-prefix-length":12965894,"vlan-id-inner":96693573,"vlan-id-outer":36602994,"is-floating":true,"neutron-network-id":"example-neutron-network-id-val-30471","neutron-subnet-id":"example-neutron-subnet-id-val-37707"}],"l3-interface-ipv6-address-list":[{"l3-interface-ipv6-address":"example-l3-interface-ipv6-address-val-39521","l3-interface-ipv6-prefix-length":79936773,"vlan-id-inner":18996980,"vlan-id-outer":57829188,"is-floating":true,"neutron-network-id":"example-neutron-network-id-val-7824","neutron-subnet-id":"example-neutron-subnet-id-val-32242"}]}]}}]},"lag-interfaces":{"lag-interface":[{"interface-name":"example-interface-name-val-14958","interface-description":"example-interface-description-val-53147","speed-value":"example-speed-value-val-40106","speed-units":"example-speed-units-val-3241","interface-id":"example-interface-id-val-41963","interface-role":"example-interface-role-val-36210","prov-status":"example-prov-status-val-86993","in-maint":true,"l-interfaces":{"l-interface":[{"interface-name":"example-interface-name-val-68784","interface-role":"example-interface-role-val-27031","v6-wan-link-ip":"example-v6-wan-link-ip-val-84237","selflink":"example-selflink-val-18671","interface-id":"example-interface-id-val-39357","macaddr":"example-macaddr-val-18618","network-name":"example-network-name-val-69761","management-option":"example-management-option-val-97287","interface-description":"example-interface-description-val-11299","is-port-mirrored":true,"in-maint":true,"prov-status":"example-prov-status-val-17553","is-ip-unnumbered":true,"allowed-address-pairs":"example-allowed-address-pairs-val-94432","vlans":{"vlan":[{"vlan-interface":"example-vlan-interface-val-6087","vlan-id-inner":73148506,"vlan-id-outer":96154645,"speed-value":"example-speed-value-val-25656","speed-units":"example-speed-units-val-56493","vlan-description":"example-vlan-description-val-41479","backdoor-connection":"example-backdoor-connection-val-1426","vpn-key":"example-vpn-key-val-51806","orchestration-status":"example-orchestration-status-val-55778","in-maint":true,"prov-status":"example-prov-status-val-74154","is-ip-unnumbered":true,"l3-interface-ipv4-address-list":[{"l3-interface-ipv4-address":"example-l3-interface-ipv4-address-val-19626","l3-interface-ipv4-prefix-length":61568821,"vlan-id-inner":29070594,"vlan-id-outer":70606591,"is-floating":true,"neutron-network-id":"example-neutron-network-id-val-66780","neutron-subnet-id":"example-neutron-subnet-id-val-55672"}],"l3-interface-ipv6-address-list":[{"l3-interface-ipv6-address":"example-l3-interface-ipv6-address-val-36704","l3-interface-ipv6-prefix-length":63868876,"vlan-id-inner":9280699,"vlan-id-outer":77194996,"is-floating":true,"neutron-network-id":"example-neutron-network-id-val-73242","neutron-subnet-id":"example-neutron-subnet-id-val-34450"}]}]},"sriov-vfs":{"sriov-vf":[{"pci-id":"example-pci-id-val-8918","vf-vlan-filter":"example-vf-vlan-filter-val-24017","vf-mac-filter":"example-vf-mac-filter-val-10153","vf-vlan-strip":true,"vf-vlan-anti-spoof-check":true,"vf-mac-anti-spoof-check":true,"vf-mirrors":"example-vf-mirrors-val-76723","vf-broadcast-allow":true,"vf-unknown-multicast-allow":true,"vf-unknown-unicast-allow":true,"vf-insert-stag":true,"vf-link-status":"example-vf-link-status-val-2457","neutron-network-id":"example-neutron-network-id-val-56687"}]},"l-interfaces":{"l-interface":[{"interface-name":"example-interface-name-val-18097","interface-role":"example-interface-role-val-32400","v6-wan-link-ip":"example-v6-wan-link-ip-val-34470","selflink":"example-selflink-val-41000","interface-id":"example-interface-id-val-87031","macaddr":"example-macaddr-val-14216","network-name":"example-network-name-val-94824","management-option":"example-management-option-val-84161","interface-description":"example-interface-description-val-98603","is-port-mirrored":true,"in-maint":true,"prov-status":"example-prov-status-val-8165","is-ip-unnumbered":true,"allowed-address-pairs":"example-allowed-address-pairs-val-7400"}]},"l3-interface-ipv4-address-list":[{"l3-interface-ipv4-address":"example-l3-interface-ipv4-address-val-99504","l3-interface-ipv4-prefix-length":1377494,"vlan-id-inner":26972619,"vlan-id-outer":30216510,"is-floating":true,"neutron-network-id":"example-neutron-network-id-val-40697","neutron-subnet-id":"example-neutron-subnet-id-val-36665"}],"l3-interface-ipv6-address-list":[{"l3-interface-ipv6-address":"example-l3-interface-ipv6-address-val-99805","l3-interface-ipv6-prefix-length":73740394,"vlan-id-inner":70722364,"vlan-id-outer":28049066,"is-floating":true,"neutron-network-id":"example-neutron-network-id-val-56654","neutron-subnet-id":"example-neutron-subnet-id-val-43360"}]}]}}]}}
${RELATIONSHIPDATA} {"related-to":"pserver","relationship-data":[{"relationship-key":"pserver.hostname","relationship-value":"${PSERVERKEYVALUE}"}]}
${CUSTOMQUERYDATA}  {"gremlin":"g.V().has('hostname', '${PSERVERKEYVALUE}')"}

*** Test Cases ***

Run AAI Put generic-vnf
    [Documentation]             Create an generic-vnf object
    ${resp}=                    PutWithCert              ${GENERICVNFURL}              ${GENERICVNFDATA}
    log                         ${GENERICVNFURL}
    log                         ${resp.text}
    Should Be Equal As Strings  ${resp.status_code}      201
	
Run AAI Put pserver
    [Documentation]             Create an pserver object
    ${resp}=                    PutWithCert              ${PSERVERURL}              ${PSERVERDATA}
    log                         ${PSERVERURL}
    log                         ${resp.text}
    Should Be Equal As Strings  ${resp.status_code}      201	
	
Run AAI Put relationship of pserver and generic-vnf
    [Documentation]             Create relationship of pserver and generic-vnf
    ${resp}=                    PutWithCert              ${RELATIONSHIPURL}              ${RELATIONSHIPDATA}
    log                         ${RELATIONSHIPURL}
    log                         ${resp.text}
    Should Be Equal As Strings  ${resp.status_code}      200

Run AAI Get pserver
    [Documentation]             Get the pserver object just relationship
    ${resp}                     GetWithCert              ${PSERVERURL}
    log                         ${resp}
    log                         ${resp.json()}
    Should Be Equal As Strings  ${resp.status_code}      200	
	
Run AAI Get generic-vnf
    [Documentation]             Get the generic-vnf object just relationship
    ${resp}                     GetWithCert              ${GENERICVNFURL}
    log                         ${resp}
    log                         ${resp.json()}
    Should Be Equal As Strings  ${resp.status_code}      200	
	
Run AAI Put custom query simple format
    [Documentation]             custom query simple format
    ${resp}=                    PutWithCert              ${CUSTOMQUERYURL}              ${CUSTOMQUERYDATA}
    log                         ${CUSTOMQUERYURL}
    log                         ${resp.text}
	log                         ${resp.json()}
    Should Be Equal As Strings  ${resp.status_code}      200
	
Run AAI Get generic-vnf to delete
    [Documentation]             Get the generic-vnf object to delete
    ${resp}                     GetWithCert              ${GENERICVNFURL}
    log                         ${resp}
    log                         ${resp.json()}
    Should Be Equal As Strings  ${resp.status_code}      200
    ${resource_version}=        Evaluate                 $resp.json().get('resource-version')
    Set Global Variable			${resource_version}

Run AAI Delete generic-vnf
    [Documentation]             Delete the generic-vnf
    ${resp}=                    DeleteWithCert           ${GENERICVNFURL}?resource-version=${resource_version}
    log                         ${resp.text}
    Should Be Equal As Strings  ${resp.status_code}      204
	
Run AAI Get pserver to delete
    [Documentation]             Get the pserver object to delete
    ${resp}                     GetWithCert              ${PSERVERURL}
    log                         ${resp}
    log                         ${resp.json()}
    Should Be Equal As Strings  ${resp.status_code}      200
    ${resource_version}=        Evaluate                 $resp.json().get('resource-version')
    Set Global Variable			${resource_version}

Run AAI Delete pserver
    [Documentation]             Delete the pserver
    ${resp}=                    DeleteWithCert           ${PSERVERURL}?resource-version=${resource_version}
    log                         ${resp.text}
    Should Be Equal As Strings  ${resp.status_code}      204	

*** Keywords ***
PutWithCert
    [Arguments]      ${url}      ${data}
    ${headers}=      Create Dictionary     Accept=application/json    Content-Type=application/json    X-TransactionId=integration-aai    X-FromAppId=integration-aai   Authorization=Basic QUFJOkFBSQ==
    ${certinfo}=     Evaluate    ('${CURDIR}/aai.crt', '${CURDIR}/aai.key')
    ${resp}=         Evaluate    requests.put('${url}', data='${data}', headers=${headers}, cert=${certinfo}, verify=False)    requests
    [return]         ${resp}
	
PatchWithCert
    [Arguments]      ${url}      ${data}
    ${headers}=      Create Dictionary     Accept=application/json    Content-Type=application/merge-patch+json    X-TransactionId=integration-aai    X-FromAppId=integration-aai   Authorization=Basic QUFJOkFBSQ==
    ${certinfo}=     Evaluate    ('${CURDIR}/aai.crt', '${CURDIR}/aai.key')
    ${resp}=         Evaluate    requests.patch('${url}', data='${data}', headers=${headers}, cert=${certinfo}, verify=False)    requests
    [return]         ${resp}	

PostWithCert
    [Arguments]      ${url}      ${data}
    ${auth}=         Create List  AAI AAI
    ${headers}=      Create Dictionary     Accept=application/json    Content-Type=application/json    X-TransactionId=integration-aai    X-FromAppId=integration-aai   Authorization=Basic QUFJOkFBSQ==
    ${certinfo}=     Evaluate    ('${CURDIR}/aai.crt', '${CURDIR}/aai.key')
    ${resp}=         Evaluate    requests.post('${url}', data='${data}', headers=${headers}, cert=${certinfo}, verify=False)    requests
    [return]         ${resp}

GetWithCert
    [Arguments]      ${url}
    ${headers}=      Create Dictionary     Accept=application/json    Content-Type=application/json    X-TransactionId=integration-aai    X-FromAppId=integration-aai   Authorization=Basic QUFJOkFBSQ==
    ${certinfo}=     Evaluate    ('${CURDIR}/aai.crt', '${CURDIR}/aai.key')
    ${resp}=         Evaluate    requests.get('${url}', headers=${headers}, cert=${certinfo}, verify=False)    requests
    [return]         ${resp}

DeleteWithCert
    [Arguments]      ${url}
    ${auth}=         Create List  AAI AAI
    ${headers}=      Create Dictionary     Accept=application/json    Content-Type=application/json    X-TransactionId=integration-aai    X-FromAppId=integration-aai   Authorization=Basic QUFJOkFBSQ==
    ${certinfo}=     Evaluate    ('${CURDIR}/aai.crt', '${CURDIR}/aai.key')
    ${resp}=         Evaluate    requests.delete('${url}', headers=${headers}, cert=${certinfo}, verify=False)    requests
    [return]         ${resp}