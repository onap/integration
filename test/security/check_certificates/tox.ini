[tox]
envlist = pep8,pylint

[testenv]
usedevelop = True
deps =
  -r{toxinidir}/requirements.txt
  -r{toxinidir}/test-requirements.txt
install_command = pip install {opts} {packages}
changedir = {toxinidir}/check_certificates

[testenv:pep8]
basepython = python3
changedir = {toxinidir}
commands = flake8 --ignore=E211,W504,E125,W605 .

[testenv:pylint]
basepython = python3
modules =
  check_certificates
deps =
    pyflakes
    pylint
commands =
    pylint -f parseable --ignore-imports=y --disable=locally-disabled -ry {[testenv:pylint]modules}

[testenv:cover]
basepython = python3
dirs =
  check_certificates
commands = nosetests --with-coverage --cover-tests \
  --cover-package check_certificates \
  --cover-min-percentage 80 {[testenv:cover]dirs}

[testenv:py3]
commands = python {toxinidir}/setup.py test
